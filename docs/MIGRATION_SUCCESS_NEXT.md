# è¿ç§»æˆåŠŸåçš„ä¸‹ä¸€æ­¥

## å½“å‰çŠ¶æ€

âœ… **æ•°æ®åº“è¿ç§»å·²æˆåŠŸå®Œæˆ**ï¼
- `20251112133920_init` - å·²åº”ç”¨
- `20251112143205_add_relations` - å·²åº”ç”¨
- `20251112150151_add_api_endpoint` - å·²åº”ç”¨

---

## ä¸‹ä¸€æ­¥ï¼šæ„å»ºå’Œéƒ¨ç½²

### ç¬¬ä¸€æ­¥ï¼šæ„å»ºé¡¹ç›®

```bash
cd /www/wwwroot/www.linkloredu.com

# æ„å»ºé¡¹ç›®
pnpm build
```

**é¢„è®¡æ—¶é—´**ï¼š3-10 åˆ†é’Ÿï¼ˆå–å†³äºé¡¹ç›®å¤§å°å’Œç½‘ç»œé€Ÿåº¦ï¼‰

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨ PM2 æœåŠ¡

```bash
# å¯åŠ¨æœåŠ¡
pm2 start ecosystem.config.js --env production

# æŸ¥çœ‹çŠ¶æ€
pm2 status

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 save
pm2 startup
```

åº”è¯¥çœ‹åˆ°ä¸¤ä¸ªè¿›ç¨‹ï¼š
- `linklore-web` - è¿è¡Œä¸­
- `linklore-worker` - è¿è¡Œä¸­

### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯æœåŠ¡

```bash
# æŸ¥çœ‹æ—¥å¿—
pm2 logs

# æˆ–è€…æŸ¥çœ‹ç‰¹å®šæœåŠ¡çš„æ—¥å¿—
pm2 logs linklore-web
```

---

## å¦‚æœæ„å»ºå¤±è´¥

### æ£€æŸ¥ TypeScript é”™è¯¯

å¦‚æœæ„å»ºæ—¶è¿˜æœ‰ TypeScript é”™è¯¯ï¼Œå¯ä»¥ï¼š

1. **åªæ„å»º web åº”ç”¨**ï¼ˆè·³è¿‡ workerï¼‰ï¼š
   ```bash
   cd /www/wwwroot/www.linkloredu.com/apps/web
   pnpm build
   ```

2. **æˆ–è€…å®‰è£…ç¼ºå°‘çš„ä¾èµ–**ï¼š
   ```bash
   cd /www/wwwroot/www.linkloredu.com
   pnpm add -D -w @types/sanitize-html @types/ali-oss
   pnpm add -w bullmq ioredis
   ```

---

## å¿«é€Ÿæ“ä½œï¼ˆä¸€é”®å®Œæˆï¼‰

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
cd /www/wwwroot/www.linkloredu.com && \
echo "ğŸ”¨ æ„å»ºé¡¹ç›®..." && \
pnpm build && \
echo "" && \
echo "âœ… æ„å»ºå®Œæˆï¼" && \
echo "" && \
echo "ğŸš€ å¯åŠ¨ PM2 æœåŠ¡..." && \
pm2 start ecosystem.config.js --env production && \
pm2 save && \
pm2 startup && \
echo "" && \
echo "âœ… æœåŠ¡å·²å¯åŠ¨ï¼" && \
echo "" && \
echo "ğŸ“Š æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼š" && \
pm2 status
```

---

## éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥ PM2 çŠ¶æ€

```bash
pm2 status
```

åº”è¯¥çœ‹åˆ°ä¸¤ä¸ªè¿›ç¨‹åœ¨è¿è¡Œã€‚

### 2. è®¿é—®ç½‘ç«™

- æ‰“å¼€æµè§ˆå™¨
- è®¿é—®ï¼š`https://www.linkloredu.com`
- åº”è¯¥èƒ½çœ‹åˆ°ç½‘ç«™é¦–é¡µ

### 3. å¥åº·æ£€æŸ¥

- è®¿é—®ï¼š`https://www.linkloredu.com/api/health`
- åº”è¯¥è¿”å› JSON å“åº”

---

## å®Œæˆæ£€æŸ¥æ¸…å•

- [x] æ•°æ®åº“è¿ç§»å·²æˆåŠŸå®Œæˆ
- [ ] é¡¹ç›®æ„å»ºå·²å®Œæˆ
- [ ] PM2 æœåŠ¡å·²å¯åŠ¨ï¼ˆä¸¤ä¸ªè¿›ç¨‹ï¼‰
- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®ï¼ˆHTTPSï¼‰
- [ ] å¥åº·æ£€æŸ¥æ¥å£æ­£å¸¸

---

## å¦‚æœæ„å»ºæˆ–å¯åŠ¨å¤±è´¥

### æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹ PM2 æ—¥å¿—
pm2 logs

# æŸ¥çœ‹æ„å»ºé”™è¯¯
# æ£€æŸ¥ç»ˆç«¯è¾“å‡ºä¸­çš„é”™è¯¯ä¿¡æ¯
```

### å¸¸è§é—®é¢˜

1. **TypeScript é”™è¯¯**ï¼šå¯èƒ½éœ€è¦å®‰è£…ç¼ºå°‘çš„ç±»å‹å£°æ˜
2. **ç«¯å£è¢«å ç”¨**ï¼šæ£€æŸ¥ 3000 ç«¯å£æ˜¯å¦è¢«å ç”¨
3. **ç¯å¢ƒå˜é‡**ï¼šç¡®ä¿ `.env.production` é…ç½®æ­£ç¡®

---

## é‡è¦æç¤º

1. **æ„å»ºéœ€è¦æ—¶é—´**ï¼šè¯·è€å¿ƒç­‰å¾… 3-10 åˆ†é’Ÿ
2. **å¦‚æœæ„å»ºå¤±è´¥**ï¼šå¯ä»¥å…ˆå¯åŠ¨æœåŠ¡ï¼ŒTypeScript é”™è¯¯ä¸ä¼šé˜»æ­¢è¿è¡Œ
3. **æ£€æŸ¥æ—¥å¿—**ï¼šå¦‚æœæœåŠ¡å¯åŠ¨å¤±è´¥ï¼ŒæŸ¥çœ‹æ—¥å¿—æ‰¾å‡ºé—®é¢˜

---

## ä¸‹ä¸€æ­¥

ç°åœ¨æ‰§è¡Œæ„å»ºå’Œå¯åŠ¨æœåŠ¡ï¼š

```bash
cd /www/wwwroot/www.linkloredu.com
pnpm build
pm2 start ecosystem.config.js --env production
pm2 save
pm2 status
```

å®Œæˆåå‘Šè¯‰æˆ‘ç»“æœï¼











